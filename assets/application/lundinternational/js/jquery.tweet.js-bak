(function($){$.fn.tweet=function(o){var s={username: ["lundinter"], list: null, avatar_size: null, count: 3, intro_text: null, outro_text: null, join_text: null, auto_join_text_default: "i said,", auto_join_text_ed: "i", auto_join_text_ing: "i am", auto_join_text_reply: "i replied to", auto_join_text_url: "i was looking at", loading_text: "", query: null};if(o) $.extend(s, o);$.fn.extend({linkUrl: function(){var returning=[];var regexp=/((ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)/gi;this.each(function(){returning.push(this.replace(regexp,"<a target=\"_blank\" href=\"$1\">$1</a>"));});return $(returning);},linkUser: function(){var returning=[];var regexp=/[\@]+([A-Za-z0-9-_]+)/gi;this.each(function(){returning.push(this.replace(regexp,"<a target=\"_blank\" href=\"http:});return $(returning);},linkHash: function(){var returning=[];var regexp=/ [\#]+([A-Za-z0-9-_]+)/gi;this.each(function(){returning.push(this.replace(regexp,' <a target="_blank" href="http:});return $(returning);},capAwesome: function(){var returning=[];this.each(function(){returning.push(this.replace(/\b(awesome)\b/gi,'<span class="awesome">$1</span>'));});return $(returning);},capEpic: function(){var returning=[];this.each(function(){returning.push(this.replace(/\b(epic)\b/gi,'<span class="epic">$1</span>'));});return $(returning);},makeHeart: function(){var returning=[];this.each(function(){returning.push(this.replace(/(<)+[3]/gi,"<tt class='heart'>â™¥</tt>"));});return $(returning);}});function parse_date(date_str){return Date.parse(date_str.replace(/^([a-z]{3})( [a-z]{3}\d\d?)(.*)( \d{4})$/i,'$1,$2$4$3'));}function relative_time(time_value){var parsed_date=parse_date(time_value);var relative_to=(arguments.length > 1) ? arguments[1] : new Date();var delta=parseInt((relative_to.getTime() - parsed_date) / 1000);var pluralize=function (singular, n){return '' + n + ' ' + singular + (n==1 ? '' : 's');};if(delta < 60){return 'less than a minute ago';}else if(delta < (60*60)){return 'about ' + pluralize("minute", parseInt(delta / 60)) + ' ago';}else if(delta < (24*60*60)){return 'about ' + pluralize("hour", parseInt(delta / 3600)) + ' ago';}else{return 'about ' + pluralize("day", parseInt(delta / 86400)) + ' ago';}}function build_url(){var proto=('https:'==document.location.protocol ? 'https:' : 'http:');if (s.list){return proto+"}else if (s.query==null && s.username.length==1){return proto+'}else{var query=(s.query || 'from:'+s.username.join(' OR from:'));return proto+'}}return this.each(function(i, widget){var list=$('<ul class="tweet_list">').appendTo(widget);var intro='<p class="tweet_intro">'+s.intro_text+'</p>';var outro='<p class="tweet_outro">'+s.outro_text+'</p>';var loading=$('<p class="loading"></p>');if(typeof(s.username)=="string"){s.username=[s.username];}if (s.loading_text) $(widget).append(loading);$.getJSON(build_url(), function(data){if (s.loading_text) loading.remove();if (s.intro_text) list.before(intro);var tweets=(data.results || data);$.each(tweets, function(i,item){if (s.join_text=="auto"){if (item.text.match(/^(@([A-Za-z0-9-_]+)) .*/i)){var join_text=s.auto_join_text_reply;}else if (item.text.match(/(^\w+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&\?\/.=]+) .*/i)){var join_text=s.auto_join_text_url;}else if (item.text.match(/^((\w+ed)|just) .*/im)){var join_text=s.auto_join_text_ed;}else if (item.text.match(/^(\w*ing) .*/i)){var join_text=s.auto_join_text_ing;}else{var join_text=s.auto_join_text_default;}}else{var join_text=s.join_text;};var from_user=item.from_user || item.user.screen_name;var real_name=item.from_user || item.user.name;var profile_image_url=item.profile_image_url || item.user.profile_image_url;var join_template='<span class="tweet_join"><a target="_blank" href="http: var join=((s.join_text) ? join_template : ' ');var date=' <span class="tweet_time"><a target="_blank" href="http: var text='<span class="tweet_text">' +$([item.text]).linkUrl().linkUser().linkHash().makeHeart().capAwesome().capEpic()[0]+ '</span>';list.append('<li><div class="tweet>"'+ text +' - '+ date+'</div></li>');list.children('li:first').addClass('tweet_first');list.children('li:odd').addClass('tweet_even');list.children('li:even').addClass('tweet_odd');});if (s.outro_text) list.after(outro);$(widget).trigger("loaded").trigger((tweets.length==0 ? "empty" : "full"));});});};})(jQuery);
